(function(e){function t(t){for(var s,r,o=t[0],l=t[1],m=t[2],d=0,u=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);c&&c(t);while(u.length)u.shift()();return n.push.apply(n,m||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,r=1;r<a.length;r++){var o=a[r];0!==i[o]&&(s=!1)}s&&(n.splice(t--,1),e=l(l.s=a[0]))}return e}var s={},r={app:0},i={app:0},n=[];function o(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-76d2b767":"bb92e1f9"}[e]+".js"}function l(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={"chunk-76d2b767":1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=new Promise((function(t,a){for(var s="css/"+({}[e]||e)+"."+{"chunk-76d2b767":"bba757a5"}[e]+".css",i=l.p+s,n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var m=n[o],d=m.getAttribute("data-href")||m.getAttribute("href");if("stylesheet"===m.rel&&(d===s||d===i))return t()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){m=u[o],d=m.getAttribute("data-href");if(d===s||d===i)return t()}var c=document.createElement("link");c.rel="stylesheet",c.type="text/css",c.onload=t,c.onerror=function(t){var s=t&&t.target&&t.target.src||i,n=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=s,delete r[e],c.parentNode.removeChild(c),a(n)},c.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(c)})).then((function(){r[e]=0})));var s=i[e];if(0!==s)if(s)t.push(s[2]);else{var n=new Promise((function(t,a){s=i[e]=[t,a]}));t.push(s[2]=n);var m,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=o(e);var u=new Error;m=function(t){d.onerror=d.onload=null,clearTimeout(c);var a=i[e];if(0!==a){if(a){var s=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",u.name="ChunkLoadError",u.type=s,u.request=r,a[1](u)}i[e]=void 0}};var c=setTimeout((function(){m({type:"timeout",target:d})}),12e4);d.onerror=d.onload=m,document.head.appendChild(d)}return Promise.all(t)},l.m=e,l.c=s,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(a,s,function(t){return e[t]}.bind(null,s));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var m=window["webpackJsonp"]=window["webpackJsonp"]||[],d=m.push.bind(m);m.push=t,m=m.slice();for(var u=0;u<m.length;u++)t(m[u]);var c=d;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0c0b":function(e,t,a){},"10f1":function(e,t,a){"use strict";var s=a("54e6"),r=a.n(s);r.a},2881:function(e,t,a){},"32e0":function(e,t,a){"use strict";var s=a("2881"),r=a.n(s);r.a},4518:function(e,t,a){},"54e6":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=a("8c4f"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},n=[],o={},l=o,m=a("2877"),d=Object(m["a"])(l,i,n,!1,null,null,null),u=d.exports,c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v(e._s(e.msg))]),e._m(0),a("h3",[e._v("Installed CLI Plugins")]),e._m(1),a("h3",[e._v("Essential Links")]),e._m(2),a("h3",[e._v("Ecosystem")]),e._m(3)])},p=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v(" For a guide and recipes on how to configure / customize this project,"),a("br"),e._v(" check out the "),a("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(". ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[e._v("babel")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[e._v("eslint")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Core Docs")])]),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Forum")])]),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Community Chat")])]),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[e._v("Twitter")])]),a("li",[a("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("News")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-router")])]),a("li",[a("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vuex")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[e._v("vue-devtools")])]),a("li",[a("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-loader")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[e._v("awesome-vue")])])])}],v={name:"HelloWorld",props:{msg:String}},h=v,f=(a("32e0"),Object(m["a"])(h,c,p,!1,null,"0b11c2c6",null)),g=f.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"register"},[a("form",{staticClass:"md-layout md-centered",attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.validateUser(t)}}},[a("md-card",{staticClass:"md-layout-item md-size-50 md-small-size-100"},[a("md-card-header",[a("div",{staticClass:"md-title"},[e._v("Sign up")])]),a("md-card-content",[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",{class:e.getValidationClass("name")},[a("label",{attrs:{for:"name"}},[e._v("First Name")]),a("md-input",{attrs:{name:"name",id:"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.$v.form.name.required?e.$v.form.name.minlength?e._e():a("span",{staticClass:"md-error"},[e._v("Invalid first name")]):a("span",{staticClass:"md-error"},[e._v("The first name is required")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",{class:e.getValidationClass("surname")},[a("label",{attrs:{for:"surname"}},[e._v("Last Name")]),a("md-input",{attrs:{name:"surname",id:"surname"},model:{value:e.form.surname,callback:function(t){e.$set(e.form,"surname",t)},expression:"form.surname"}}),e.$v.form.surname.required?e.$v.form.surname.minlength?e._e():a("span",{staticClass:"md-error"},[e._v("Invalid last name")]):a("span",{staticClass:"md-error"},[e._v("The last name is required")])],1)],1)]),a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",{class:e.getValidationClass("username")},[a("label",{attrs:{for:"username"}},[e._v("Username")]),this.isEdit?e._e():a("md-input",{attrs:{name:"username",id:"username"},on:{change:function(t){return e.changeValue()}},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),e.$v.form.username.required?e.$v.form.username.usernameExists?e.$v.form.username.minlength?e._e():a("span",{staticClass:"md-error"},[e._v("Invalid username")]):a("span",{staticClass:"md-error"},[e._v("Username already exists")]):a("span",{staticClass:"md-error"},[e._v("The username is required")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",{class:e.getValidationClass("gender")},[a("label",{attrs:{for:"gender"}},[e._v("Gender")]),a("md-select",{attrs:{name:"gender",id:"gender","md-dense":"",placeholder:"Select gender"},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[a("md-option",{attrs:{value:"MALE"}},[e._v("Male")]),a("md-option",{attrs:{value:"FEMALE"}},[e._v("Female")]),a("md-option",{attrs:{value:"OTHER"}},[e._v("Other")])],1),a("span",{staticClass:"md-error"},[e._v("The gender is required")])],1)],1)]),a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",{class:e.getValidationClass("password")},[a("label",{attrs:{for:"password"}},[e._v("Password")]),a("md-input",{attrs:{type:"password",name:"password",id:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e.$v.form.password.required?e.$v.form.password.minlength?e._e():a("span",{staticClass:"md-error"},[e._v("Invalid password")]):a("span",{staticClass:"md-error"},[e._v("The password is required")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",{class:e.getValidationClass("passwordConfirm")},[a("label",{attrs:{for:"passwordConfirm"}},[e._v("Confirm password")]),a("md-input",{attrs:{type:"password",name:"passwordConfirm",id:"passwordConfirm"},model:{value:e.form.passwordConfirm,callback:function(t){e.$set(e.form,"passwordConfirm",t)},expression:"form.passwordConfirm"}}),e.$v.form.passwordConfirm.required?e.$v.form.passwordConfirm.sameAsPassword?e._e():a("span",{staticClass:"md-error"},[e._v("Passwords do not match")]):a("span",{staticClass:"md-error"},[e._v("Password confirm is required")])],1)],1)])]),a("md-card-actions",[this.isEdit?a("div",[a("md-button",{staticClass:"md-dense md-raised md-primary",on:{click:e.validateUser}},[e._v("Submit")])],1):a("div",[a("md-button",{staticClass:"md-dense md-raised md-primary",attrs:{type:"submit"}},[e._v("Submit")])],1)])],1)],1)])},y=[],_=(a("b0c0"),a("1dce")),C=a("b5ae"),A=a("bc3a"),T=a.n(A),D=T.a.create({baseURL:"/PocetniREST/rest",headers:{"Content-type":"application/json"}});function E(){return!this.wrongUsername}var N={name:"Register",mixins:[_["validationMixin"]],props:{loggedInUser:null,addingHost:Boolean},data:function(){return{form:{name:null,surname:null,username:null,gender:null,password:null,userType:null,passwordConfirm:null},wrongUsername:!1,isEdit:!1}},validations:{form:{name:{required:C["required"],minLength:Object(C["minLength"])(3)},surname:{required:C["required"],minLength:Object(C["minLength"])(3)},username:{required:C["required"],minLength:Object(C["minLength"])(3),usernameExists:E},password:{required:C["required"],minLength:Object(C["minLength"])(6)},passwordConfirm:{required:C["required"],sameAsPassword:Object(C["sameAs"])("password")},gender:{required:C["required"]}}},methods:{getValidationClass:function(e){var t=this.$v.form[e];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},validateUser:function(){this.$v.$touch(),this.$v.$invalid||(this.isEdit?this.saveEdit():this.saveUser())},clearForm:function(){this.$v.$reset(),this.form.name="",this.form.surname="",this.form.username="",this.form.gender=null,this.form.password="",this.form.passwordConfirm=""},changeValue:function(){this.wrongUsername=!1},saveUser:function(){var e=this,t="GUEST";this.addingHost&&(t="HOST"),D.post("user",{username:this.form.username,password:this.form.password,name:this.form.name,surname:this.form.surname,gender:this.form.gender,userType:t}).then((function(t){e.wrongUsername=!1,console.log(t)})).catch((function(t){console.log(t),e.wrongUsername=!0}))},saveEdit:function(){var e=this;null===this.form.password?D.put("user",{username:this.form.username,password:this.loggedInUser.password,name:this.form.name,surname:this.form.surname,gender:this.form.gender,userType:this.form.userType}).then((function(){e.wrongUsername=!1,e.$emit("userEdited",e.form)})).catch((function(){e.$emit("globalMessage","Username already exists!"),e.wrongUsername=!0})):D.put("user",{username:this.form.username,password:this.form.password,name:this.form.name,surname:this.form.surname,gender:this.form.gender,userType:this.form.userType}).then((function(){e.wrongUsername=!1,e.$emit("userEdited",e.form)})).catch((function(){e.$emit("globalMessage","Username already exists!"),e.wrongUsername=!0}))}},mounted:function(){null===this.loggedInUser?this.isEdit=!1:this.isEdit=!0,this.isEdit&&!this.addingHost?(this.form.name=this.loggedInUser.name,this.form.surname=this.loggedInUser.surname,this.form.gender=this.loggedInUser.gender,this.form.username=this.loggedInUser.username,this.form.userType=this.loggedInUser.userType):this.clearForm()}},I=N,S=(a("10f1"),Object(m["a"])(I,b,y,!1,null,"46d54146",null)),k=S.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"amenity"},[a("div",[a("form",{staticClass:"md-layout",attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.validateAmenity(t)}}},[a("md-card",{staticClass:"md-layout-item md-size-50 md-small-size-100"},[0==e.isEdit?a("div",[a("md-card-header",[a("div",{staticClass:"md-title"},[e._v("Amenity")])])],1):a("div",[a("md-card-header",[a("div",{staticClass:"md-title"},[e._v("Edit amenity")])])],1),a("md-card-content",[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",{class:e.getValidationClass("type")},[a("label",{attrs:{for:"type"}},[e._v("Type")]),a("md-input",{attrs:{name:"type",id:"type",autocomplete:"type"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}}),e.$v.form.type.required?e._e():a("span",{staticClass:"md-error"},[e._v("The type of amenity is required")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",{class:e.getValidationClass("name")},[a("label",{attrs:{for:"name"}},[e._v("Name")]),a("md-input",{attrs:{name:"name",id:"name",autocomplete:"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.$v.form.name.required?e._e():a("span",{staticClass:"md-error"},[e._v("The name is required")])],1)],1)])]),a("md-card-actions",[0==this.isEdit?a("div",[a("md-button",{staticClass:"md-dense md-raised md-primary",attrs:{type:"submit"}},[e._v("Submit")])],1):a("div",[a("md-button",{staticClass:"md-dense md-raised md-primary",on:{click:function(t){return e.saveEdit()}}},[e._v("Submit")])],1)])],1)],1)])])},w=[],$=(a("a9e3"),{name:"Amenity",mixins:[_["validationMixin"]],props:{changeType:String,changeName:String,changeId:Number,isEdit:Boolean},data:function(){return{form:{type:null,name:null},edit:!1}},validations:{form:{type:{required:C["required"]},name:{required:C["required"]}}},methods:{getValidationClass:function(e){var t=this.$v.form[e];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},validateAmenity:function(){this.$v.$touch(),this.$v.$invalid||this.saveAmenity()},saveEdit:function(){var e=this;D.put("amenities",{id:this.changeId,type:this.form.type,name:this.form.name}).then((function(t){e.$emit("amenityEdited",t.data)})).catch((function(e){console.log(e)}))},saveAmenity:function(){var e=this;D.post("amenities",{type:this.form.type,name:this.form.name}).then((function(t){e.$emit("amenityAdded",t.data)})).catch((function(e){console.log(e)}))}},mounted:function(){this.form.type=this.changeType,this.form.name=this.changeName,this.form.id=this.changeId,this.edit=this.isEdit}}),U=$,R=Object(m["a"])(U,F,w,!1,null,"44476aa7",null),x=R.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"apartment"},[e.isHost()?a("div",[a("form",{staticClass:"md-layout",attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.validateApartment(t)}}},[a("md-card",{staticClass:"md-layout-item md-size-50 md-small-size-100"},[a("md-card-header",[a("div",{staticClass:"md-title"},[e._v("Apartment")])]),a("md-card-content",[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-50"},[a("md-field",{class:e.getValidationClass("type")},[a("label",{attrs:{for:"type"}},[e._v("Apartment type")]),a("md-select",{attrs:{name:"type",id:"type","md-dense":""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("md-option",{attrs:{value:"FULL"}},[e._v("Full")]),a("md-option",{attrs:{value:"ONE_ROOM"}},[e._v("One room")])],1),a("span",{staticClass:"md-error"},[e._v("Room type is required")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-50"},[a("md-field",[a("label",{attrs:{for:"amenities"}},[e._v("Amenities")]),a("md-select",{attrs:{name:"amenities",id:"amenities",multiple:""},model:{value:e.selectedAmenities,callback:function(t){e.selectedAmenities=t},expression:"selectedAmenities"}},e._l(this.allAmenities,(function(t){return a("md-option",{key:t.id,attrs:{value:t}},[e._v(e._s(t.name))])})),1)],1)],1)]),a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-50"},[a("md-field",{class:e.getValidationClass("roomNumber")},[a("label",{attrs:{for:"roomNumber"}},[e._v("Room number")]),a("md-input",{attrs:{type:"number",id:"roomNumber",name:"roomNumber",autocomplete:"roomNumber"},model:{value:e.form.roomNumber,callback:function(t){e.$set(e.form,"roomNumber",t)},expression:"form.roomNumber"}}),e.$v.form.roomNumber.required?e._e():a("span",{staticClass:"md-error"},[e._v("The room number is required")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-50"},[a("md-field",{class:e.getValidationClass("guestNumber")},[a("label",{attrs:{for:"guestNumber"}},[e._v("Guest number")]),a("md-input",{attrs:{type:"number",id:"guestNumber",name:"guestNumber",autocomplete:"guestNumber"},model:{value:e.form.guestNumber,callback:function(t){e.$set(e.form,"guestNumber",t)},expression:"form.guestNumber"}}),e.$v.form.guestNumber.required?e._e():a("span",{staticClass:"md-error"},[e._v("The guest number is required")])],1)],1)]),a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-50"},[a("md-field",{class:e.getValidationClass("entryTime")},[a("label",{attrs:{for:"entryTime"}},[e._v("Entry time")]),a("md-input",{attrs:{type:"number",id:"entryTime",name:"entryTime",autocomplete:"14"},model:{value:e.form.entryTime,callback:function(t){e.$set(e.form,"entryTime",t)},expression:"form.entryTime"}}),e.$v.form.entryTime.required?e._e():a("span",{staticClass:"md-error"},[e._v("Entry time is required")]),e.$v.form.entryTime.between?e._e():a("span",{staticClass:"md-error"},[e._v("Entry time must be between 0-24")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-50"},[a("md-field",{class:e.getValidationClass("leaveTime")},[a("label",{attrs:{for:"leaveTime"}},[e._v("Leave time")]),a("md-input",{attrs:{type:"number",id:"leaveTime",name:"leaveTime",autocomplete:"10"},model:{value:e.form.leaveTime,callback:function(t){e.$set(e.form,"leaveTime",t)},expression:"form.leaveTime"}}),e.$v.form.leaveTime.required?e._e():a("span",{staticClass:"md-error"},[e._v("Leave time is required")]),e.$v.form.leaveTime.between?e._e():a("span",{staticClass:"md-error"},[e._v("Leave time must be between 0-24")])],1)],1)]),a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-50"},[a("md-field",{class:e.getValidationClass("price")},[a("label",{attrs:{for:"price"}},[e._v("Price")]),a("md-input",{attrs:{type:"number",id:"price",name:"price"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}}),e.$v.form.price.required?e._e():a("span",{staticClass:"md-error"},[e._v("The price is required")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-50"},[a("md-field",[a("label",[e._v("Select images")]),a("md-file",{ref:"file",attrs:{type:"file",accept:"image/jpg",multiple:""},on:{change:e.fileChanged},model:{value:e.selectedImages,callback:function(t){e.selectedImages=t},expression:"selectedImages"}})],1)],1)]),a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",{attrs:{for:"latitude"}},[e._v("Latitude")]),a("md-input",{attrs:{type:"number",autocomplete:"0",name:"latitude",id:"latitude"},model:{value:e.form.latitude,callback:function(t){e.$set(e.form,"latitude",t)},expression:"form.latitude"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",{attrs:{for:"longitude"}},[e._v("Longitude")]),a("md-input",{attrs:{type:"number",autocomplete:"0",name:"longitude",id:"longitude"},model:{value:e.form.longitude,callback:function(t){e.$set(e.form,"longitude",t)},expression:"form.longitude"}})],1)],1)]),a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-50"},[a("md-field",{class:e.getValidationClass("city")},[a("label",{attrs:{for:"city"}},[e._v("City")]),a("md-input",{attrs:{id:"city",name:"city"},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}}),e.$v.form.city.required?e._e():a("span",{staticClass:"md-error"},[e._v("The city is required")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-50"},[a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",{class:e.getValidationClass("zipCode")},[a("label",{attrs:{for:"zipCode"}},[e._v("Zip Code")]),a("md-input",{attrs:{type:"number",name:"zipCode",id:"zipCode"},model:{value:e.form.zipCode,callback:function(t){e.$set(e.form,"zipCode",t)},expression:"form.zipCode"}}),e.$v.form.zipCode.required?e._e():a("span",{staticClass:"md-error"},[e._v("The zip code is required")])],1)],1)])]),a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-50"},[a("md-field",{class:e.getValidationClass("street")},[a("label",{attrs:{for:"street"}},[e._v("Street")]),a("md-input",{attrs:{id:"street",name:"street"},model:{value:e.form.street,callback:function(t){e.$set(e.form,"street",t)},expression:"form.street"}}),e.$v.form.street.required?e._e():a("span",{staticClass:"md-error"},[e._v("The street is required")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",{class:e.getValidationClass("number")},[a("label",{attrs:{for:"number"}},[e._v("Number")]),a("md-input",{attrs:{type:"number",name:"number",id:"number"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}}),e.$v.form.number.required?e._e():a("span",{staticClass:"md-error"},[e._v("The zip code is required")])],1)],1)])]),a("md-card-actions",[this.isEdit?a("div",[a("md-button",{staticClass:"md-dense md-raised md-primary",on:{click:function(t){return e.saveEdit()}}},[e._v("Submit")])],1):a("div",[a("md-button",{staticClass:"md-dense md-raised md-primary",attrs:{type:"submit"}},[e._v("Submit")])],1)])],1)],1)]):a("div",[a("accessDenied")],1)])},O=[],q=(a("4160"),a("159b"),function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),z=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"accessDenied",attrs:{align:"center"}},[a("div",[a("span",{staticClass:"md-display-4"},[e._v("Access Denied")])]),a("div",[a("span",{staticClass:"md-display-1"},[e._v("You do not have access to this page.")])])])}],P={name:"AccessDenied"},M=P,j=(a("f655"),Object(m["a"])(M,q,z,!1,null,"4e810ceb",null)),H=j.exports,V={name:"Apartment",mixins:[_["validationMixin"]],props:{loggedInUser:null,id:Number,isEdit:Boolean},components:{accessDenied:H},data:function(){return{form:{type:null,roomNumber:null,guestNumber:null,location:{latitude:0,longitude:0,adress:{street:null,number:null,city:null,zipCode:null}},rentDates:null,freeDates:null,imageList:[],price:null,entryTime:14,leaveTime:10,amenities:[],loaded:Number,updatingImages:!1},selectedAmenities:[],selectedImages:[],allAmenities:[],file:null,apartment:null}},validations:{form:{type:{required:C["required"]},roomNumber:{required:C["required"]},guestNumber:{required:C["required"]},entryTime:{required:C["required"],between:Object(C["between"])(0,24)},leaveTime:{required:C["required"],between:Object(C["between"])(0,24)},price:{required:C["required"]},street:{required:C["required"],minLength:Object(C["minLength"])(3)},city:{required:C["required"]},number:{required:C["required"]},zipCode:{required:C["required"]}}},methods:{imageLoaded:function(e){this.form.imageList.push(e),console.log(this.form.imageList)},getBase64:function(e,t){var a=new FileReader;a.addEventListener("load",(function(){t(a.result)}),!1),a.readAsDataURL(e)},fileChanged:function(e){var t=this;this.form.imageList=[],this.selectedImages=e.target.files,this.selectedImages.forEach((function(e){t.getBase64(e,t.imageLoaded)}))},getValidationClass:function(e){var t=this.$v.form[e];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},validateApartment:function(){this.$v.$touch(),this.$v.$invalid||this.saveApartment()},saveApartment:function(){var e=this;console.log(this.selectedAmenities),D.post("apartment",{type:this.form.type,roomNumber:this.form.roomNumber,guestNumber:this.form.guestNumber,latitude:this.form.latitude,longitude:this.form.longitude,city:this.form.city,street:this.form.street,zipCode:this.form.zipCode,number:this.form.number,imageList:[],price:this.form.price,entryTime:this.form.entryTime,leaveTime:this.form.leaveTime,amenities:this.selectedAmenities,active:!0,rentDates:[],freeDates:[],comments:[],hostUsername:this.loggedInUser.username}).then((function(t){e.$emit("apartmentAdded",t.data),e.$router.push("apartmentTable")})).catch((function(e){console.log(e)}))},isHost:function(){return null===this.apartment||"HOST"===this.loggedInUser.userType&&this.loggedInUser.username===this.apartment.hostUsername},uploadImages:function(){},saveEdit:function(){var e=this;D.put("apartment",{id:this.id,type:this.form.type,roomNumber:this.form.roomNumber,guestNumber:this.form.guestNumber,latitude:this.form.latitude,longitude:this.form.longitude,city:this.form.city,street:this.form.street,zipCode:this.form.zipCode,number:this.form.number,imageList:[],price:this.form.price,entryTime:this.form.entryTime,leaveTime:this.form.leaveTime,amenities:this.selectedAmenities,active:!0,rentDates:[],freeDates:[],comments:[],hostUsername:this.loggedInUser.username}).then((function(t){e.$emit("apartmentEdited",t.data)})).catch((function(e){console.log(e)}))}},created:function(){var e=this;console.log(this.id),D.get("apartment/"+this.id).then((function(t){console.log(t.data),e.form.type=t.data.type,e.form.roomNumber=t.data.roomNumber,e.form.guestNumber=t.data.guestNumber,e.form.latitude=t.data.latitude,e.form.longitude=t.data.longitude,e.form.city=t.data.city,e.form.street=t.data.street,e.form.zipCode=t.data.zipCode,e.form.number=t.data.number,e.form.imageList=t.data.imageList,e.form.price=t.data.price,e.form.entryTime=t.data.entryTime,e.form.leaveTime=t.data.leaveTime,e.form.selectedAmenities=t.data.amenities})).catch((function(e){console.log(e)})),D.get("amenities").then((function(t){e.allAmenities=t.data})).catch((function(e){console.log(e)}))},mounted:function(){}},G=V,W=(a("a399"),Object(m["a"])(G,L,O,!1,null,"55666498",null)),B=W.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"apartmentTable"},[a("md-dialog",{staticClass:"md-dialog-content md-theme-default",attrs:{"md-active":e.showDialog},on:{"update:mdActive":function(t){e.showDialog=t},"update:md-active":function(t){e.showDialog=t}}},[a("apartmentDetails",{attrs:{selectedApartment:this.selectedApartment,loggedInUser:this.loggedInUser},on:{activateReservation:function(t){return e.activateReservation(t)},openGallery:function(t){return e.openGallery(t)}}})],1),a("md-dialog",{staticClass:"md-dialog-content md-theme-default",attrs:{"md-active":e.isEdit},on:{"update:mdActive":function(t){e.isEdit=t},"update:md-active":function(t){e.isEdit=t}}},[this.isEdit?a("div",[a("Apartment",{attrs:{id:this.apartment.id,isEdit:this.isEdit},on:{apartmentAdded:function(t){return e.apartmentCreated(t)},apartmentEdited:function(t){return e.apartmentEdited(t)}}})],1):e._e()]),a("div",[e.reservationActive?a("create-reservation",{attrs:{"selected-apartment":this.selectedApartment}}):e._e()],1),a("span",[e.filterActive?e._e():a("md-button",{staticClass:"md-raised md-primary",on:{click:e.activateFilter}},[e._v(" Filter ")])],1),a("div",[e.filterActive?a("filter-component",{attrs:{activeFilters:this.activeFilters,amenityList:this.amenities},on:{filtering:e.doFiltering}}):e._e()],1),a("md-table",{attrs:{"md-sort":"name","md-sort-order":"asc","md-card":"","md-fixed-header":""},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{},[e.adminLoggedIn?a("md-table-cell",{attrs:{"md-label":"ID","md-sort-by":"id","md-numeric":""}},[e._v(e._s(s.id))]):e._e(),a("md-table-cell",{attrs:{"md-label":"Type","md-sort-by":"type"}},[e._v(e._s(s.type))]),a("md-table-cell",{attrs:{"md-label":"RoomNumber","md-sort-by":"roomNumber"}},[e._v(e._s(s.roomNumber))]),a("md-table-cell",{attrs:{"md-label":"GuestNumber","md-sort-by":"guestNumber"}},[e._v(e._s(s.guestNumber))]),a("md-table-cell",{attrs:{"md-label":"Adress","md-sort-by":"address"}},[e._v(e._s(s.street))]),a("md-table-cell",{attrs:{"md-label":"Number","md-sort-by":"number"}},[e._v(e._s(s.number))]),a("md-table-cell",{attrs:{"md-label":"City","md-sort-by":"city"}},[e._v(e._s(s.city))]),a("md-table-cell",{attrs:{"md-label":"Details"}},[a("md-button",{staticClass:"md-dense md-raised md-secondary",on:{click:function(t){return e.showApartmentDetails(s)}}},[e._v("Details")])],1),a("md-table-cell",{attrs:{"md-label":"Edit"}},[a("md-button",{staticClass:"md-dense md-raised md-default",on:{click:function(t){return e.isEditFunction(s)}}},[e._v("Edit")])],1),e.canDeactivate(s)?a("md-table-cell",{attrs:{"md-label":"Deactivate"}},[e.canDeactivate(s)?a("div",[a("md-button",{staticClass:"md-dense md-raised md-accent",on:{click:function(t){return e.deactivateApartment(s)}}},[e._v("Deactivate")])],1):e._e()]):e._e(),e.canActivate(s)?a("md-table-cell",{attrs:{"md-label":"Activate"}},[e.canActivate(s)?a("div",[a("md-button",{staticClass:"md-dense md-raised md-primary",on:{click:function(t){return e.activate(s)}}},[e._v("Activate")])],1):e._e()]):e._e(),e.adminLoggedIn||e.hostLoggedIn(s)?a("md-table-cell",{attrs:{"md-label":"Delete"}},[e.adminLoggedIn||e.hostLoggedIn(s)?a("div",[a("md-button",{staticClass:"md-dense md-raised md-accent",on:{click:function(t){return e.deleteApartment(s)}}},[e._v("Delete")])],1):e._e()]):e._e()],1)}}]),model:{value:e.searched,callback:function(t){e.searched=t},expression:"searched"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-start"},[a("h1",{staticClass:"md-title"},[e._v("Apartments")])])])],1),e.addButton?a("md-button",{staticClass:"md-dense md-raised md-primary",attrs:{to:"/apartment"}},[e._v("Add Apartment")]):e._e()],1)},Y=[],K=(a("99af"),a("4de4"),a("caad"),a("13d5"),a("45fc"),a("d3b7"),a("25f0"),a("2532"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ApartmentDetails"},[a("md-tabs",[a("md-tab",{attrs:{"md-label":"Basic info"}},[a("md-field",[a("label",[e._v("Apartment type")]),a("md-input",{attrs:{readonly:""},model:{value:e.selectedApartment.type,callback:function(t){e.$set(e.selectedApartment,"type",t)},expression:"selectedApartment.type"}})],1),a("md-field",[a("label",[e._v("Room number")]),a("md-input",{attrs:{readonly:""},model:{value:e.selectedApartment.roomNumber,callback:function(t){e.$set(e.selectedApartment,"roomNumber",t)},expression:"selectedApartment.roomNumber"}})],1),a("md-field",[a("label",[e._v("Guest number")]),a("md-input",{attrs:{readonly:""},model:{value:e.selectedApartment.guestNumber,callback:function(t){e.$set(e.selectedApartment,"guestNumber",t)},expression:"selectedApartment.guestNumber"}})],1),a("md-field",[a("label",[e._v("Location")]),a("md-input",{attrs:{readonly:""},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),a("md-field",[a("label",[e._v("Host username")]),a("md-input",{attrs:{readonly:""},model:{value:e.selectedApartment.hostUsername,callback:function(t){e.$set(e.selectedApartment,"hostUsername",t)},expression:"selectedApartment.hostUsername"}})],1),a("md-field",[a("label",[e._v("Price")]),a("md-input",{attrs:{readonly:""},model:{value:e.selectedApartment.price,callback:function(t){e.$set(e.selectedApartment,"price",t)},expression:"selectedApartment.price"}})],1),a("md-field",[a("label",[e._v("Entry time")]),a("md-input",{attrs:{readonly:""},model:{value:e.selectedApartment.entryTime,callback:function(t){e.$set(e.selectedApartment,"entryTime",t)},expression:"selectedApartment.entryTime"}})],1),a("md-field",[a("label",[e._v("Leave time")]),a("md-input",{attrs:{readonly:""},model:{value:e.selectedApartment.leaveTime,callback:function(t){e.$set(e.selectedApartment,"leaveTime",t)},expression:"selectedApartment.leaveTime"}})],1),this.selectedApartment.active?a("md-field",[a("label",[e._v("Active")]),a("md-input",{attrs:{readonly:""},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}})],1):e._e(),this.selectedApartment.active?e._e():a("md-field",[a("label",[e._v("Active")]),a("md-input",{attrs:{readonly:""},model:{value:e.nonActive,callback:function(t){e.nonActive=t},expression:"nonActive"}})],1),e.canReserve?a("div",[a("span",[a("md-button",{staticClass:"md-raised md-primary",on:{click:e.createReservation}},[e._v("RESERVE")])],1)]):e._e()],1),a("md-tab",{attrs:{"md-label":"Amenities"}},[a("md-list",{staticClass:"md-double-line"},e._l(e.amenityTypes,(function(t,s){return a("div",{key:s},[a("md-subheader",[e._v(" "+e._s(t)+" ")]),e._l(e.selectedApartment.amenities,(function(s,r){return a("div",{key:r},[s.type===t?a("md-list-item",[a("div",{staticClass:"md-list-item-text"},[e._v(" "+e._s(s.name)+" ")])]):e._e()],1)}))],2)})),0),e.canReserve?a("div",[a("span",[a("md-button",{staticClass:"md-raised md-primary",on:{click:e.createReservation}},[e._v("RESERVE")])],1)]):e._e()],1),a("md-tab",{attrs:{"md-label":"Images"}},[a("ul",{staticStyle:{margin:"0",padding:"0"}},e._l(e.media,(function(t,s){return a("li",{key:s,staticStyle:{display:"inline-block",margin:"0 5px 5px 0"}},[a("img",{staticStyle:{height:"100px",cursor:"pointer"},attrs:{src:t},on:{click:function(t){return e.openGallery(s)}}})])})),0),e.canReserve?a("div",[a("span",[a("md-button",{on:{click:e.createReservation}},[e._v("RESERVE")])],1)]):e._e()]),a("md-tab",{attrs:{"md-label":"Availability"}},[a("v-calendar",{attrs:{"available-dates":[{start:e.startRentDate,end:e.endRentDate}],"is-inline":""}}),e.canReserve?a("div",[a("span",[a("md-button",{on:{click:e.createReservation}},[e._v("RESERVE")])],1)]):e._e()],1),a("md-tab",{attrs:{"md-label":"Comments"}},[e.isHost||e.isAdministrator?a("div",[e.hasComments?a("div",e._l(this.comments,(function(t){return a("div",{key:t.id},[a("md-card",[a("md-card-header",[a("h3",[e._v(e._s(t.username))])]),a("md-card-content",[e._v(" "+e._s(t.comment)+" "),a("br"),a("br"),a("label",[e._v("Rating: ")]),a("vue-stars",{attrs:{max:5,value:t.stars,readonly:!0}})],1),e.isHost&&e.commentVisible(t)?a("md-card-actions",[a("md-button",{staticClass:"md-dense md-raised md-accent",on:{click:function(a){return e.hideComment(t)}}},[e._v("Hide Comment")])],1):e._e()],1)],1)})),0):e._e()]):a("div",[e.hasCommentsForGuests?a("div",e._l(this.commentsForGuests,(function(t){return a("div",{key:t.id},[a("md-card",[a("md-card-header",[a("h3",[e._v(e._s(t.username))])]),a("md-card-content",[e._v(" "+e._s(t.comment)+" "),a("br"),a("br"),a("label",[e._v("Rating: ")]),a("vue-stars",{attrs:{max:5,value:t.stars,readonly:!0}})],1)],1)],1)})),0):e._e()]),e.canReserve?a("div",{on:{click:e.createReservation}},[a("md-button",[e._v("RESERVE")])],1):e._e()])],1)],1)}),Z=[],Q={components:{},props:{selectedApartment:null,loggedInUser:null},data:function(){return{amenityTypes:[],active:"ACTIVE",nonActive:"NON ACTIVE",address:"",startRentDate:Date,endRentDate:Date,selectedDate:Date,comments:[],commentsForGuests:[],media:[]}},computed:{canReserve:function(){return null!==this.loggedInUser&&"GUEST"===this.loggedInUser.userType},hasComments:function(){return null!==this.comments},hasCommentsForGuests:function(){return null!==this.commentsForGuests},isHost:function(){return null!==this.loggedInUser&&("HOST"===this.loggedInUser.userType&&this.selectedApartment.hostUsername===this.loggedInUser.username)},isAdministrator:function(){return null!==this.loggedInUser&&"ADMINISTRATOR"===this.loggedInUser.userType}},mounted:function(){var e=this,t=[];null!==this.selectedApartment&&(this.address=this.selectedApartment.number+" "+this.selectedApartment.street+", "+this.selectedApartment.city,this.selectedApartment.amenities.forEach((function(e){t.includes(e.type)||t.push(e.type)})),this.startRentDate=new Date(this.selectedApartment.rentDates[0]),this.endRentDate=new Date(this.selectedApartment.rentDates[1]),this.selectedApartment.imageList.forEach((function(t){e.media.push(t)}))),this.amenityTypes=t,D.get("apartmentComment/apartment/"+this.selectedApartment.id).then((function(t){e.comments=t.data,e.comments.forEach((function(t){!0===t.visible&&e.commentsForGuests.push(t)}))})).catch((function(e){console.log(e)}))},methods:{openGallery:function(e){this.$emit("openGallery",{media:this.media,index:e})},createReservation:function(){this.$emit("activateReservation",this.selectedApartment)},commentVisible:function(e){return!!e.visible},hideComment:function(e){var t=this;D.put("apartmentComment",{id:e.id,username:e.username,apartment:e.apartment,stars:e.stars,visible:!1}).then((function(){t.comments.forEach((function(t){t.id===e.id&&(t.visible=!1)}))})).catch((function(e){console.log(e)}))}}},X=Q,ee=(a("96fe"),Object(m["a"])(X,K,Z,!1,null,"180f544b",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.allowed?e._e():a("div",[a("access-denied")],1),e.allowed?a("div",[a("md-steppers",[a("md-step",{attrs:{id:"first","md-label":"Select dates","md-error":e.dateError}},[a("v-date-picker",{attrs:{"disabled-dates":e.disabledDates,columns:e.$screens({default:1,lg:2}),mode:"range","select-attribute":e.selectDragAttribute,"drag-attribute":e.selectDragAttribute,"is-inline":""},on:{drag:function(t){e.dragValue=t}},scopedSlots:e._u([{key:"day-popover",fn:function(t){var s=t.format;return a("div",{},[e._v(" "+e._s(s(e.dragValue?e.dragValue.start:e.selectedDates.start,"MMM D"))+" - "+e._s(s(e.dragValue?e.dragValue.end:e.selectedDates.end,"MMM D"))+" ")])}}],null,!1,3325675145),model:{value:e.selectedDates,callback:function(t){e.selectedDates=t},expression:"selectedDates"}}),a("span",[e._v(" Night number "+e._s(e.nightNumber)+" ")])],1),a("md-step",{attrs:{id:"second","md-label":"Message for host"}},[a("md-field",[a("label",[e._v("Message")]),a("md-textarea",{model:{value:e.messageForHost,callback:function(t){e.messageForHost=t},expression:"messageForHost"}})],1)],1),a("md-step",{attrs:{id:"third","md-label":"Confirm reservation"}},[a("div",[a("md-field",[a("label",[e._v("Start date")]),a("md-input",{attrs:{disabled:""},model:{value:e.getFormatedStartDate,callback:function(t){e.getFormatedStartDate=t},expression:"getFormatedStartDate"}})],1),a("md-field",[a("label",[e._v("End date")]),a("md-input",{attrs:{disabled:""},model:{value:e.getFormatedEndDate,callback:function(t){e.getFormatedEndDate=t},expression:"getFormatedEndDate"}})],1),a("md-field",[a("label",[e._v("Night number")]),a("md-input",{attrs:{disabled:""},model:{value:e.nightNumber,callback:function(t){e.nightNumber=t},expression:"nightNumber"}})],1),a("md-field",[a("label",[e._v("Total price")]),a("md-input",{attrs:{disabled:""},model:{value:e.totalPrice,callback:function(t){e.totalPrice=t},expression:"totalPrice"}})],1)],1),a("span",[a("div",[a("md-button",{staticClass:"md-dense md-raised md-primary",on:{click:e.confirmReservation}},[e._v("Confirm")]),a("md-button",{staticClass:"md-dense md-raised md-secondary",on:{click:e.cancel}},[e._v("Cancel")])],1)])])],1)],1):e._e(),a("md-snackbar",{attrs:{"md-position":"center","md-duration":e.errorSnackbarDuration,"md-active":e.showErrorSnackbar,"md-persistent":""},on:{"update:mdActive":function(t){e.showErrorSnackbar=t},"update:md-active":function(t){e.showErrorSnackbar=t}}},[a("span",[e._v(e._s(e.errorSnackbarText))]),a("md-button",{staticClass:"md-primary",on:{click:function(t){e.showErrorSnackbar=!1}}},[e._v("Ok")])],1)],1)},se=[],re=a("b166"),ie={components:{accessDenied:H},props:{selectedApartment:null,loggedInUser:null},data:function(){return{dragValue:null,selectedDates:{start:null,end:null,span:null},startRentDate:Date,endRentDate:Date,reservationDTO:{apartmentId:Number,date:String,nights:Number,totalPrice:Number,welcomeNote:String,guestUsername:String,hostUsername:String,status:"CREATED"},messageForHost:"",disabledDates:[],dateError:null,errorSnackbarDuration:4e3,showErrorSnackbar:!1,errorSnackbarText:""}},mounted:function(){var e=this;null!==this.selectedApartment&&(this.startRentDate=new Date(this.selectedApartment.rentDates[0]),this.endRentDate=new Date(this.selectedApartment.rentDates[1]),D.get("reservation/apartment/"+this.selectedApartment.id).then((function(t){var a=t.data,s=[];a.forEach((function(e){"CREATED"!==e.status&&"ACCEPTED"!==e.status||s.push(e)})),e.disabledDates.push({start:null,end:e.startRentDate}),e.disabledDates.push({start:e.endRentDate,end:null}),s.forEach((function(t){var a=new Date(t.date);e.disabledDates.push({start:a,span:t.nights})}))})))},computed:{selectDragAttribute:function(){return{popover:{visibility:"hover",isInteractive:!1}}},nightNumber:function(){return null===this.selectedDates?0:(this.selectedDates.end-this.selectedDates.start)/864e5},totalPrice:function(){return null===this.selectedDates||null===this.selectedApartment?0:this.nightNumber*this.selectedApartment.price},getFormatedStartDate:function(){return null!==this.selectedDates&&null!==this.selectedDates.start?Object(re["a"])(this.selectedDates.start,"yyyy-MM-dd"):""},getFormatedEndDate:function(){return null!==this.selectedDates&&null!==this.selectedDates.end?Object(re["a"])(this.selectedDates.end,"yyyy-MM-dd"):""},allowed:function(){return null!==this.selectedApartment&&"GUEST"===this.loggedInUser.userType}},methods:{cancel:function(){this.$router.push("/apartmentTable")},confirmReservation:function(){var e=this;if(""===this.getFormatedStartDate||this.getFormatedStartDate===this.getFormatedEndDate)return this.dateError="Invalid date input",this.errorSnackbarText="Invalid date input",void(this.showErrorSnackbar=!0);this.reservationDTO.apartmentId=this.selectedApartment.id,this.reservationDTO.date=this.getFormatedStartDate,this.reservationDTO.nights=this.nightNumber,this.reservationDTO.totalPrice=this.totalPrice,this.reservationDTO.welcomeNote=this.messageForHost,this.reservationDTO.guestUsername=this.loggedInUser.username,this.reservationDTO.hostUsername=this.selectedApartment.hostUsername,D.post("reservation",JSON.stringify(this.reservationDTO)).then((function(){e.$emit("globalMessage","Reservation created!"),e.$router.push("/reservationTable")})).catch((function(){e.errorSnackbarText="Reservation NOT created!",e.showErrorSnackbar=!0}))}}},ne=ie,oe=Object(m["a"])(ne,ae,se,!1,null,null,null),le=oe.exports,me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"filter"},[a("form",{staticClass:"md-layout",attrs:{novalidate:""}},[a("md-card",{staticClass:"md-layout-item md-size-100 md-small-size-100"},[a("md-card-content",[a("div",{staticClass:"md-layout md-gutter"},[e.dateFilterActivated?a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",{attrs:{for:"availableDateFrom"}},[e._v("Available from:")]),a("md-datepicker",{model:{value:e.apartment.arrivalDate,callback:function(t){e.$set(e.apartment,"arrivalDate",t)},expression:"apartment.arrivalDate"}})],1)],1):e._e(),e.dateFilterActivated?a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",{attrs:{for:"availableDateTo"}},[e._v("To: ")]),a("md-datepicker",{model:{value:e.apartment.checkoutDate,callback:function(t){e.$set(e.apartment,"checkoutDate",t)},expression:"apartment.checkoutDate"}})],1)],1):e._e(),a("br"),e.guestNumberFilterActivated?a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",{attrs:{for:"guestNumber"}},[e._v("Guest Number")]),a("md-input",{attrs:{type:"number",name:"guestNumber",id:"guestNumber",autocomplete:"guestNumber"},model:{value:e.apartment.guestNumber,callback:function(t){e.$set(e.apartment,"guestNumber",t)},expression:"apartment.guestNumber"}})],1)],1):e._e(),e.cityFilterActivated?a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",{attrs:{for:"city"}},[e._v("City")]),a("md-input",{attrs:{name:"city",id:"city",autocomplete:"city"},model:{value:e.apartment.city,callback:function(t){e.$set(e.apartment,"city",t)},expression:"apartment.city"}})],1)],1):e._e(),e.countryFilterActivated?a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",{attrs:{for:"country"}},[e._v("Country")]),a("md-input",{attrs:{name:"country",id:"country",autocomplete:"country"},model:{value:e.apartment.country,callback:function(t){e.$set(e.apartment,"country",t)},expression:"apartment.country"}})],1)],1):e._e(),e.roomNumberFilterActivated?a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",{attrs:{for:"fromRoomNumber"}},[e._v("Room Number from:")]),a("md-input",{attrs:{type:"number",name:"fromRoomNumber",id:"fromRoomNumber",autocomplete:"fromRoomNumber"},model:{value:e.apartment.fromRoomNumber,callback:function(t){e.$set(e.apartment,"fromRoomNumber",t)},expression:"apartment.fromRoomNumber"}})],1)],1):e._e(),e.roomNumberFilterActivated?a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",{attrs:{for:"toRoomNumber"}},[e._v("To:")]),a("md-input",{attrs:{type:"number",name:"toRoomNumber",id:"toRoomNumber",autocomplete:"toRoomNumber"},model:{value:e.apartment.toRoomNumber,callback:function(t){e.$set(e.apartment,"toRoomNumber",t)},expression:"apartment.toRoomNumber"}})],1)],1):e._e()]),a("div",{staticClass:"md-layout md-gutter"},[e.priceFilterActivated?a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",{attrs:{for:"fromPrice"}},[e._v("Price from: ")]),a("md-input",{attrs:{type:"number",name:"fromPrice",id:"fromPrice",autocomplete:"fromPrice"},model:{value:e.apartment.fromPrice,callback:function(t){e.$set(e.apartment,"fromPrice",t)},expression:"apartment.fromPrice"}})],1)],1):e._e(),e.priceFilterActivated?a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",{attrs:{for:"toPrice"}},[e._v("To:")]),a("md-input",{attrs:{type:"number",name:"toPrice",id:"toPrice",autocomplete:"toPrice"},model:{value:e.apartment.toPrice,callback:function(t){e.$set(e.apartment,"toPrice",t)},expression:"apartment.toPrice"}})],1)],1):e._e(),e.typeFilterActivated?a("div",{staticClass:"md-layout-item"},[a("md-field",[a("label",{attrs:{for:"apartmentType"}},[e._v("Apartment type")]),a("md-select",{attrs:{name:"apartmentType",id:"apartmentType","md-dense":""},on:{"md-selected":e.apartmentTypeSelected},model:{value:this.apartment.apartmentType,callback:function(t){e.$set(this.apartment,"apartmentType",t)},expression:"this.apartment.apartmentType"}},[a("md-option",{attrs:{value:"ALL"}},[e._v("All")]),a("md-option",{attrs:{value:"FULL"}},[e._v("Full")]),a("md-option",{attrs:{value:"ONE_ROOM"}},[e._v("One room")])],1)],1)],1):e._e(),e.amenitiesFilterActivated?a("div",{staticClass:"md-layout-item"},[a("md-field",[a("label",{attrs:{for:"apartmentAmenities"}},[e._v("Apartment amenities")]),a("md-select",{attrs:{multiple:"","md-dense":""},on:{"md-selected":e.amenitySelected},model:{value:this.apartment.hasAmenities,callback:function(t){e.$set(this.apartment,"hasAmenities",t)},expression:"this.apartment.hasAmenities"}},e._l(this.amenityList,(function(t){return a("md-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name))])})),1)],1)],1):e._e(),e.apartmentStatusFilterActivated?a("div",{staticClass:"md-layout-item"},[a("md-field",[a("label",{attrs:{for:"apartmentStatus"}},[e._v("Apartment Status")]),a("md-select",{attrs:{name:"apartmentStatus",id:"apartmentStatus","md-dense":""},on:{"md-selected":e.apartmentStatusSelected},model:{value:this.apartment.apartmentStatus,callback:function(t){e.$set(this.apartment,"apartmentStatus",t)},expression:"this.apartment.apartmentStatus"}},[a("md-option",{attrs:{value:"ALL"}},[e._v("All")]),a("md-option",{attrs:{value:"ACTIVE"}},[e._v("Active")]),a("md-option",{attrs:{value:"NON_ACTIVE"}},[e._v("Non active")])],1)],1)],1):e._e()]),e.userTypeFilterActivated?a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",{attrs:{for:"userType"}},[e._v("User Type")]),a("md-select",{attrs:{name:"userType",id:"userType","md-dense":""},on:{"md-selected":e.userTypeSelected},model:{value:this.user.userType,callback:function(t){e.$set(this.user,"userType",t)},expression:"this.user.userType"}},[a("md-option",{attrs:{value:"ALL"}},[e._v("All")]),a("md-option",{attrs:{value:"ADMINISTRATOR"}},[e._v("Administrator")]),a("md-option",{attrs:{value:"HOST"}},[e._v("Host")]),a("md-option",{attrs:{value:"GUEST"}},[e._v("Guest")])],1)],1)],1),e.genderFilterActivated?a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",{attrs:{for:"gender"}},[e._v("Gender")]),a("md-select",{attrs:{name:"gender",id:"gender","md-dense":""},on:{"md-selected":e.userGenderSelected},model:{value:this.user.gender,callback:function(t){e.$set(this.user,"gender",t)},expression:"this.user.gender"}},[a("md-option",{attrs:{value:"ALL"}},[e._v("All")]),a("md-option",{attrs:{value:"MALE"}},[e._v("Male")]),a("md-option",{attrs:{value:"FEMALE"}},[e._v("Female")]),a("md-option",{attrs:{value:"OTHER"}},[e._v("Other")])],1)],1)],1):e._e()]):e._e(),e.reservationsStatusFilterActivated?a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item"},[a("md-field",[a("label",{attrs:{for:"reservationStatus"}},[e._v("Reservation Status")]),a("md-select",{attrs:{name:"reservationStatus",id:"reservationStatus","md-dense":""},on:{"md-selected":e.selectedReservationStatus},model:{value:this.reservation.reservationStatus,callback:function(t){e.$set(this.reservation,"reservationStatus",t)},expression:"this.reservation.reservationStatus"}},[a("md-option",{attrs:{value:"ALL"}},[e._v(" All ")]),a("md-option",{attrs:{value:"CREATED"}},[e._v("Created")]),a("md-option",{attrs:{value:"DENIED"}},[e._v("Denied")]),a("md-option",{attrs:{value:"CANCELED"}},[e._v("Canceled")]),a("md-option",{attrs:{value:"ACCEPTED"}},[e._v("Accepted")]),a("md-option",{attrs:{value:"PASSED"}},[e._v("Passed")])],1)],1)],1)]):e._e()]),this.guestNumberFilter?a("md-chip",{staticClass:"md-primary",attrs:{"md-deletable":""},on:{"md-delete":e.guestNumberDeleted}},[e._v(e._s(this.apartment.guestNumber)+" "),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Guest Number")])],1):e._e(),this.cityFilter?a("md-chip",{staticClass:"md-primary",attrs:{"md-deletable":""},on:{"md-delete":function(t){return e.cityDeleted(t)}}},[e._v(e._s(this.apartment.city)+" "),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("City")])],1):e._e(),this.countryFilter?a("md-chip",{staticClass:"md-primary",attrs:{"md-deletable":""},on:{"md-delete":function(t){return e.countryDeleted(t)}}},[e._v(e._s(this.apartment.country)+" "),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Country")])],1):e._e(),this.roomNumberFilter?a("md-chip",{staticClass:"md-primary",attrs:{"md-deletable":""},on:{"md-delete":function(t){return e.roomNumberDeleted(t)}}},[e._v(e._s(this.apartment.fromRoomNumber)+" - "+e._s(this.apartment.toRoomNumber)+" "),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Room Number")])],1):e._e(),this.priceFilter?a("md-chip",{staticClass:"md-primary",attrs:{"md-deletable":""},on:{"md-delete":function(t){return e.priceDeleted(t)}}},[e._v(e._s(this.apartment.fromPrice)+" - "+e._s(this.apartment.toPrice)+" "),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Price range")])],1):e._e(),this.typeFilter?a("md-chip",{staticClass:"md-primary",attrs:{"md-deletable":""},on:{"md-delete":function(t){return e.typeDeleted(t)}}},[e._v(e._s(this.apartment.apartmentType)+" "),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Apartment Type")])],1):e._e(),this.statusFilter?a("md-chip",{staticClass:"md-primary",attrs:{"md-deletable":""},on:{"md-delete":function(t){return e.statusDeleted(t)}}},[e._v(e._s(this.apartment.apartmentStatus)+" "),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Apartment Status")])],1):e._e(),this.userTypeFilter?a("md-chip",{staticClass:"md-primary",attrs:{"md-deletable":""},on:{"md-delete":function(t){return e.userTypeDeleted(t)}}},[e._v(e._s(this.user.userType)+" "),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("User Type")])],1):e._e(),this.genderFilter?a("md-chip",{staticClass:"md-primary",attrs:{"md-deletable":""},on:{"md-delete":function(t){return e.genderDeleted(t)}}},[e._v(e._s(this.user.gender)+" "),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Gender")])],1):e._e(),this.reservationsStatusFilter?a("md-chip",{staticClass:"md-primary",attrs:{"md-deletable":""},on:{"md-delete":function(t){return e.reservationStatusDeleted(t)}}},[e._v(e._s(this.reservation.reservationStatus)+" "),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Reservation Status")])],1):e._e(),this.dateFilter?a("md-chip",{staticClass:"md-primary",attrs:{"md-deletable":""},on:{"md-delete":function(t){return e.dateFilterDeleted(t)}}},[e._v("Selected dates "),a("md-tooltip",{attrs:{"md-direction":"top"}},[e._v("Reservation Status")])],1):e._e(),a("md-button",{staticClass:"md-dense md-raised md-primary",on:{click:function(t){return e.filter()}}},[e._v("Filter")])],1)],1)])},de=[],ue={name:"FilterComponent",data:function(){return{apartment:{guestNumber:null,arrivalDate:null,checkoutDate:null,city:null,country:null,fromPrice:null,toPrice:null,fromRoomNumber:null,toRoomNumber:null,apartmentType:"ALL",hasAmenities:[],apartmentStatus:null},user:{userType:"ALL",gender:"ALL"},reservation:{reservationStatus:"ALL"},guestNumberFilter:!1,cityFilter:!1,countryFilter:!1,roomNumberFilter:!1,priceFilter:!1,typeFilter:!1,statusFilter:!1,userTypeFilter:!1,genderFilter:!1,reservationsStatusFilter:!1,dateFilter:!1,guestNumberFilterActivated:!1,cityFilterActivated:!1,countryFilterActivated:!1,roomNumberFilterActivated:!1,priceFilterActivated:!1,typeFilterActivated:!1,statusFilterActivated:!1,userTypeFilterActivated:!1,genderFilterActivated:!1,reservationsStatusFilterActivated:!1,apartmentStatusFilterActivated:!1,dateFilterActivated:!1,amenitiesFilterActivated:!1}},props:{activeFilters:Array,amenityList:Array},mounted:function(){this.activeFilters&&(this.activeFilters.includes("guestNumber")&&(this.guestNumberFilterActivated=!0),this.activeFilters.includes("city")&&(this.cityFilterActivated=!0),this.activeFilters.includes("country")&&(this.countryFilterActivated=!0),this.activeFilters.includes("roomNumber")&&(this.roomNumberFilterActivated=!0),this.activeFilters.includes("price")&&(this.priceFilterActivated=!0),this.activeFilters.includes("type")&&(this.typeFilterActivated=!0),this.activeFilters.includes("status")&&(this.statusFilterActivated=!0),this.activeFilters.includes("userType")&&(this.userTypeFilterActivated=!0),this.activeFilters.includes("gender")&&(this.genderFilterActivated=!0),this.activeFilters.includes("reservationStatus")&&(this.reservationsStatusFilterActivated=!0),this.activeFilters.includes("apartmentStatus")&&(this.apartmentStatusFilterActivated=!0),this.activeFilters.includes("hasAmenity")&&(this.amenitiesFilterActivated=!0),this.activeFilters.includes("calendar")&&(this.dateFilterActivated=!0))},methods:{userGenderSelected:function(e){this.user.gender=e},userTypeSelected:function(e){this.user.userType=e},apartmentStatusSelected:function(e){this.apartment.apartmentStatus=e},apartmentTypeSelected:function(e){this.apartment.apartmentType=e},amenitySelected:function(e){this.apartment.hasAmenities=e},selectedReservationStatus:function(e){this.reservation.reservationStatus=e},amenitiesDeleted:function(){this.apartment.hasAmenities=[],this.filter()},guestNumberDeleted:function(){this.apartment.guestNumber=null,this.filter()},cityDeleted:function(){this.apartment.city=null,this.filter()},countryDeleted:function(){this.apartment.country=null,this.filter()},roomNumberDeleted:function(){this.apartment.fromRoomNumber=null,this.apartment.toRoomNumber=null,this.filter()},priceDeleted:function(){this.apartment.fromPrice=null,this.apartment.toPrice=null,this.filter()},typeDeleted:function(){this.apartment.apartmentType=null,this.filter()},statusDeleted:function(){this.apartment.apartmentStatus=null,this.filter()},userTypeDeleted:function(){this.user.userType=null,this.filter()},genderDeleted:function(){this.user.gender=null,this.filter()},reservationStatusDeleted:function(){this.reservation.reservationStatus=null,this.filter()},dateFilterDeleted:function(){this.apartment.arrivalDate=null,this.apartment.checkoutDate=null,this.filter()},filter:function(){null===this.apartment.arrivalDate||"null"===this.apartment.checkoutDate?this.dateFilter=!1:this.dateFilter=!0,null===this.apartment.guestNumber||""===this.apartment.guestNumber?this.guestNumberFilter=!1:this.guestNumberFilter=!0,null===this.apartment.city||""===this.apartment.city?this.cityFilter=!1:this.cityFilter=!0,null===this.apartment.country||""===this.apartment.country?this.countryFilter=!1:this.countryFilter=!0,null===this.apartment.fromRoomNumber||""===this.apartment.fromRoomNumber||null===this.apartment.toRoomNumber||""===this.apartment.toRoomNumber||this.apartment.toRoomNumber<this.apartment.fromRoomNumber?this.roomNumberFilter=!1:this.roomNumberFilter=!0,null===this.apartment.fromPrice||""===this.apartment.fromPrice||null===this.apartment.toPrice||""===this.apartment.toPrice||this.apartment.toPrice<this.apartment.fromPrice?this.priceFilter=!1:this.priceFilter=!0,null===this.apartment.apartmentType||""===this.apartment.apartmentType||"ALL"===this.apartment.apartmentType?(this.typeFilter=!1,this.apartment.apartmentType=null):this.typeFilter=!0,null===this.apartment.apartmentStatus||""===this.apartment.apartmentStatus||"ALL"===this.apartment.apartmentStatus?(this.statusFilter=!1,this.apartment.apartmentStatus=null):this.statusFilter=!0,null===this.user.userType||""===this.user.userType||"ALL"===this.user.userType?(this.userTypeFilter=!1,this.user.userType=null):this.userTypeFilter=!0,null===this.user.gender||""===this.user.gender||"ALL"===this.user.gender?(this.genderFilter=!1,this.user.gender=null):this.genderFilter=!0,null===this.reservation.reservationStatus||""===this.reservation.reservationStatus||"ALL"===this.reservation.reservationStatus?(this.reservationsStatusFilter=!1,this.reservation.reservationStatus=null):this.reservationsStatusFilter=!0,this.$emit("filtering",{apartment:this.apartment,user:this.user,reservation:this.reservation})}}},ce=ue,pe=Object(m["a"])(ce,me,de,!1,null,"3ffb4825",null),ve=pe.exports,he=function(e){return e.toString().toLowerCase()},fe=function(e,t){var a=[];return t&&(a=a.concat(e.filter((function(e){return e.id.includes(t)}))),a=a.concat(e.filter((function(e){return he(e.type).includes(he(t))}))),a=a.concat(e.filter((function(e){return e.rootNumber.includes(t)}))),a=a.concat(e.filter((function(e){return e.guestNumber.includes(t)}))),a=a.concat(e.filter((function(e){return e.entryTime.includes(t)}))),a=a.concat(e.filter((function(e){return e.leaveTime.includes(t)}))),a=ge(a,(function(e,t){return e.id===t.id}))),a},ge=function(e,t){return e.reduce((function(e,a){return e.some((function(e){return t(a,e)}))||e.push(a),e}),[])},be={name:"ApartmentTable",components:{apartmentDetails:te,createReservation:le,Apartment:B,filterComponent:ve},data:function(){return{activeFilters:["city","street","price","roomNumber","guestNumber","type","hasAmenity","apartmentStatus","calendar"],search:null,searched:[],apartments:[],showDialog:!1,selectedApartment:null,selectedDate:null,reservationActive:!1,isEdit:!1,apartment:null,filterActive:!1,reservedDates:[]}},props:{loggedInUser:null},methods:{doFiltering:function(e){var t=this,a=[];this.apartments.forEach((function(s){var r=!0;null!==e.apartment.apartmentStatus&&("ACTIVE"===e.apartment.apartmentStatus?s.active||(r=!1):s.active&&(r=!1)),null!==e.apartment.apartmentType&&e.apartment.apartmentType!==s.type&&(r=!1),null!==e.apartment.city&&e.apartment.city!==s.city&&(r=!1),null!==e.apartment.fromPrice&&(e.apartment.fromPrice>s.price||e.apartment.toPrice<s.price)&&(r=!1),null!==e.apartment.fromRoomNumber&&null!==e.apartment.toRoomNumber&&(e.apartment.fromRoomNumber>s.roomNumber||e.apartment.toRoomNumber<s.roomNumber)&&(r=!1),null!==e.apartment.guestNumber&&e.apartment.guestNumber!=s.guestNumber&&(r=!1);var i=!0;if(null!==e.apartment.hasAmenities&&e.apartment.hasAmenities.forEach((function(e){var t=!1;s.amenities.forEach((function(a){a.id===e&&(t=!0)})),t||(i=!1)})),i||(r=!1),null!==e.apartment.checkoutDate&&null!==e.apartment.arrivalDate){var n=new Date(s.rentDates[0]),o=new Date(s.rentDates[1]);(n>e.apartment.arrivalDate||o<e.apartment.checkoutDate)&&(r=!1),r&&t.reservedDates.forEach((function(t){if(s.id===t.apartmentId){var a=new Date(t.date),i=a.getTime(),n=i+864e5*t.nights;e.apartment.arrivalDate.getTime()>i&&e.apartment.arrivalDate.getTime()<n&&(r=!1),e.apartment.checkoutDate.getTime()>i&&e.apartment.checkoutDate.getTime()<n&&(r=!1)}}))}r&&a.push(s)})),this.searched=a},activateFilter:function(){this.filterActive=!0},showApartmentDetails:function(e){this.selectedApartment=e,this.showDialog=!0},activateReservation:function(){this.showDialog=!1,this.reservationActive=!0,this.$emit("activateReservation",this.selectedApartment)},deactiveReservation:function(){this.reservationActive=!1},openGallery:function(e){this.$emit("openGallery",e)},isEditFunction:function(e){this.isEdit=!0,this.apartment=e},apartmentCreated:function(){var e=this;D.get("apartment").then((function(t){e.apartment=t.data,e.searched=t.data})).catch((function(e){console.log(e)}))},apartmentEdited:function(){var e=this;this.isEdit=!1,D.get("apartment").then((function(t){e.apartments=t.data,e.searched=t.data})).catch((function(e){console.log(e)}))},deactivateApartment:function(e){var t=this;D.put("apartment",{id:e.id,type:e.type,roomNumber:e.roomNumber,guestNumber:e.guestNumber,latitude:e.latitude,longitude:e.longitude,city:e.city,street:e.street,zipCode:e.zipCode,number:e.number,imageList:[],price:e.price,entryTime:e.entryTime,leaveTime:e.leaveTime,amenities:e.selectedAmenities,active:!1,rentDates:[],freeDates:[],comments:[],hostUsername:this.loggedInUser.username}).then((function(){t.searched.forEach((function(t){t.id===e.id&&(t.active=!1)})),t.apartments.forEach((function(t){t.id===e.id&&(t.active=!1)}))})).catch((function(e){console.log(e)}))},activate:function(e){var t=this;D.put("apartment",{id:e.id,type:e.type,roomNumber:e.roomNumber,guestNumber:e.guestNumber,latitude:e.latitude,longitude:e.longitude,city:e.city,street:e.street,zipCode:e.zipCode,number:e.number,imageList:[],price:e.price,entryTime:e.entryTime,leaveTime:e.leaveTime,amenities:e.selectedAmenities,active:!0,rentDates:[],freeDates:[],comments:[],hostUsername:this.loggedInUser.username}).then((function(){t.searched.forEach((function(t){t.id===e.id&&(t.active=!0)})),t.apartments.forEach((function(t){t.id===e.id&&(t.active=!0)}))})).catch((function(e){console.log(e)}))},canDeactivate:function(e){return null!==this.loggedInUser&&("GUEST"!==this.loggedInUser.userType&&!1!==e.active)},canActivate:function(e){return null!==this.loggedInUser&&("GUEST"!==this.loggedInUser.userType&&!0!==e.active)},deleteApartment:function(e){var t=this;D.delete("apartment/"+e.id).then((function(e){return console.log(e)})).catch((function(e){console.log(e)})),D.get("apartment").then((function(e){t.apartment=e.data,t.searched=e.data}))},hostLoggedIn:function(e){return null!==this.loggedInUser&&("HOST"===this.loggedInUser.userType&&e.hostUsername===this.loggedInUser.username)}},searchOnTable:function(){""==this.searchedWord?this.searched=this.reservations:this.searched=fe(this.reservations,this.searchedWord)},mounted:function(){var e=this;null!==this.loggedInUser&&"GUEST"!==this.loggedInUser.userType?"HOST"!==this.loggedInUser.userType?"ADMINISTRATOR"===this.loggedInUser.userType&&(D.get("apartment").then((function(t){e.apartments=t.data,e.searched=t.data})).catch((function(e){console.log(e)})),D.get("amenities").then((function(t){e.amenities=t.data})),this.reservationActive=!1,D.get("reservation/dates").then((function(t){e.reservedDates=t.data}))):D.get("apartment/user/"+this.loggedInUser.username).then((function(t){e.apartments=t.data,e.searched=t.data})):D.get("apartment/active").then((function(t){e.apartments=t.data,e.searched=t.data}))},computed:{addButton:function(){return null!==this.loggedInUser&&"HOST"===this.loggedInUser.userType},adminLoggedIn:function(){return null!==this.loggedInUser&&"ADMINISTRATOR"===this.loggedInUser.userType}}},ye=be,_e=(a("812e"),Object(m["a"])(ye,J,Y,!1,null,"64c8ccc6",null)),Ce=_e.exports,Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"amenitiesTable"},[e.isAdministrator()?a("div",[a("md-dialog",{attrs:{"md-active":e.showDialog},on:{"update:mdActive":function(t){e.showDialog=t},"update:md-active":function(t){e.showDialog=t}}},[a("Amenity",{attrs:{changeId:this.editId,changeName:this.editName,changeType:this.editType,isEdit:this.isEdit},on:{amenityAdded:function(t){return e.amenityCreated(t)},amenityEdited:function(t){return e.amenityEdited(t)}}})],1),a("md-table",{attrs:{"md-sort":"name","md-sort-order":"asc","md-card":"","md-fixed-header":""},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"ID","md-sort-by":"id","md-numeric":""}},[e._v(e._s(s.id))]),a("md-table-cell",{attrs:{"md-label":"Name","md-sort-by":"name"}},[e._v(e._s(s.name))]),a("md-table-cell",{attrs:{"md-label":"Type","md-sort-by":"type"}},[e._v(e._s(s.type))]),a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-button",{staticClass:"md-dense md-raised md-default",on:{click:function(t){return e.isEditFunction(s)}}},[e._v("Edit")]),a("md-button",{staticClass:"md-dense md-raised md-accent",on:{click:function(t){return e.removeAmenity(s)}}},[e._v("Delete")])],1)],1)}}]),model:{value:e.searched,callback:function(t){e.searched=t},expression:"searched"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-start"},[a("h1",{staticClass:"md-title"},[e._v("Amenities")])]),a("md-field",{staticClass:"md-toolbar-section-end",attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Search"},on:{input:e.searchOnTable},model:{value:e.searchedWord,callback:function(t){e.searchedWord=t},expression:"searchedWord"}})],1)],1)],1),a("md-button",{staticClass:"md-dense md-raised md-primary",on:{click:function(t){return e.showDialogFunction()}}},[e._v("Add Amenity")])],1):a("div",[a("accessDenied")],1)])},Te=[],De=function(e){return e.toString().toLowerCase()},Ee=function(e,t){return e.reduce((function(e,a){return e.some((function(e){return t(a,e)}))||e.push(a),e}),[])},Ne=function(e,t){var a=[];return t&&(a=a.concat(e.filter((function(e){return e.type.includes(t)})))),t&&(a=a.concat(e.filter((function(e){return De(e.name).includes(De(t))})))),a=Ee(a,(function(e,t){return e.name==t.name})),a},Ie={name:"AmenitiesTable",data:function(){return{search:null,searchType:null,searched:[],amenities:[],showDialog:!1,searchedWord:"",isEdit:!1,editType:null,editName:null,editId:null}},props:{loggedInUser:null},components:{Amenity:x,AccessDenied:H},methods:{searchOnTable:function(){""==this.searchedWord?this.searched=this.amenities:this.searched=Ne(this.amenities,this.searchedWord)},showDialogFunction:function(){this.isEdit=!1,this.editType="",this.editName="",this.editId=null,this.showDialog=!0},removeAmenity:function(e){var t=this;D.delete("amenities/"+e.id).then(D.put("apartment/deletedAmenity/"+e.id).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))).catch((function(e){return console.log(e)})),D.get("amenities").then((function(e){t.amenities=e.data,t.searched=e.data})).catch((function(e){console.log(e)}))},isEditFunction:function(e){this.isEdit=!0,this.editType=e.type,this.editName=e.name,this.editId=e.id,this.showDialog=!0},amenityCreated:function(e){this.showDialog=!1,this.amenities.push(e)},amenityEdited:function(){var e=this;this.isEdit=!1,this.showDialog=!1,D.get("amenities").then((function(t){e.amenities=t.data,e.searched=t.data})).catch((function(e){console.log(e)}))},isAdministrator:function(){return null!==this.loggedInUser&&"ADMINISTRATOR"===this.loggedInUser.userType}},created:function(){var e=this;D.get("amenities").then((function(t){e.amenities=t.data,e.searched=t.data})).catch((function(e){console.log(e)}))}},Se=Ie,ke=(a("d474"),Object(m["a"])(Se,Ae,Te,!1,null,"381a1166",null)),Fe=ke.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"wrapper "},[a("side-bar",{attrs:{"logged-in-user":e.loggedInUser},on:{userLoggedIn:function(t){return e.userLoggedIn(t)}}}),a("div",{staticClass:"main-panel"},[a("router-view",{attrs:{"logged-in-user":e.loggedInUser,"selected-apartment":e.selectedApartment,addingHost:e.addingHost},on:{userLoggedIn:function(t){return e.userLoggedIn(t)},activateReservation:function(t){return e.activateReservation(t)},reservationCompleted:function(t){return e.reservationCompleted(t)},globalMessage:function(t){return e.showGlobalMessage(t)},openGallery:function(t){return e.openGallery(t)},addingHost:function(t){return e.openAddHost(t)},userEdited:function(t){return e.userEdited(t)}}})],1),a("md-snackbar",{attrs:{"md-position":"center","md-duration":e.snackbarDuration,"md-active":e.showSnackbar,"md-persistent":""},on:{"update:mdActive":function(t){e.showSnackbar=t},"update:md-active":function(t){e.showSnackbar=t}}},[a("span",[e._v(e._s(e.snackbarText))]),a("md-button",{staticClass:"md-primary",on:{click:function(t){e.showSnackbar=!1}}},[e._v("Ok")])],1),a("LightBox",{ref:"lightBox",attrs:{media:e.media,"show-light-box":!1,"show-caption":!1}})],1)])},$e=[],Ue=a("9c77"),Re=a.n(Ue);a.e("chunk-76d2b767").then(a.t.bind(null,"2363",7));var xe={components:{LightBox:Re.a},props:{},methods:{userLoggedIn:function(e){this.loggedInUser=e,this.$cookie.set("loggedInUser",JSON.stringify(e)),null!==e&&("ADMINISTRATOR"===e.userType?this.$router.push("/usersTable"):this.$router.push("/apartmentTable"))},activateReservation:function(e){this.selectedApartment=e,this.$router.push("/reservation")},reservationCompleted:function(){this.selectedApartment=null},showGlobalMessage:function(e){this.snackbarText=e,this.showSnackbar=!0},openGallery:function(e){this.media=e.media,this.$refs.lightBox.showImage(e.index)},userEdited:function(e){this.userLoggedIn(e),this.$router.push("/apartmentTable")},openAddHost:function(){this.addingHost=!0,this.$router.push("/register")}},data:function(){return{loggedInUser:null,selectedApartment:null,snackbarDuration:4e3,showSnackbar:!1,snackbarText:"",media:[],addingHost:!1}},created:function(){this.loggedInUser=JSON.parse(this.$cookie.get("loggedInUser"))}},Le=xe,Oe=Object(m["a"])(Le,we,$e,!1,null,null,null),qe=Oe.exports,ze=a("43f9"),Pe=a.n(ze),Me=(a("51de"),a("e094"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("md-toolbar",{staticClass:"md-primary"},[a("md-button",{staticClass:"md-icon-button",on:{click:function(t){e.showNavigation=!0}}},[a("md-icon",[e._v("menu")])],1),a("span",{staticClass:"md-title"},[e._v("Bookomat")]),a("div",{staticClass:"md-toolbar-section-end"},[a("div",{on:{click:e.openEditUser}},[e.loggedInUser?a("md-avatar",{staticClass:"md-avatar-icon md-default"},[a("md-ripple",{on:{click:e.openEditUser}},[a("md-icon",[e._v("perm_identity")])],1),a("md-tooltip",{attrs:{"md-direction":"bottom"}},[e._v("Edit my profile")])],1):e._e()],1),e.loggedInUser?e._e():a("md-button",{staticClass:"md-dense md-primary",attrs:{to:"/login"}},[e._v("Log in")]),e.loggedInUser?e._e():a("md-button",{staticClass:"md-dense md-raised md-primary",attrs:{to:"/register"}},[e._v("Sign up")]),e.loggedInUser?a("md-button",{staticClass:"md-dense md-raised md-primary",attrs:{to:"/login"},nativeOn:{click:function(t){return e.logout(t)}}},[e._v("Logout")]):e._e()],1)],1),a("md-drawer",{attrs:{"md-active":e.showNavigation,"md-swipeable":""},on:{"update:mdActive":function(t){e.showNavigation=t},"update:md-active":function(t){e.showNavigation=t}}},[a("md-toolbar",{staticClass:"md-transparent",attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title"},[e._v("Menu")])]),a("md-list",[a("md-list-item",{attrs:{to:"apartmentTable"}},[a("md-icon",[e._v("analytics")]),a("span",{staticClass:"md-list-item-text"},[e._v("Apartments")])],1),e.loggedInUser?a("md-list-item",{attrs:{to:"/reservationTable"}},[a("md-icon",[e._v("event")]),a("span",{staticClass:"md-list-item-text"},[e._v("Reservations")])],1):e._e(),e.loggedAdministrator?a("md-list-item",{attrs:{to:"/usersTable"}},[a("md-icon",[e._v("group")]),a("span",{staticClass:"md-list-item-text"},[e._v("Users")])],1):e._e(),e.loggedHost?a("md-list-item",{attrs:{to:"apartment"}},[a("md-icon",[e._v("add")]),a("span",{staticClass:"md-list-item-text"},[e._v("Add Apartment")])],1):e._e(),e.administrator?a("md-list-item",{attrs:{to:"amenitiesTable"}},[a("md-icon",[e._v("dns")]),a("span",{staticClass:"md-list-item-text"},[e._v("Amenities")])],1):e._e()],1)],1),this.showDialog?a("div",[a("md-dialog",{staticClass:"md-dialog-content md-theme-default",attrs:{"md-active":e.showDialog},on:{"update:mdActive":function(t){e.showDialog=t},"update:md-active":function(t){e.showDialog=t}}},[a("Register",{attrs:{isEdit:this.showDialog,loggedInUser:this.loggedInUser},on:{userRegistered:function(t){return e.userAdded(t)},userEdited:function(t){return e.userEdited(t)}}})],1)],1):e._e()],1)}),je=[],He={name:"side-bar",props:{loggedInUser:null},components:{Register:k},methods:{logout:function(){this.$emit("userLoggedIn",null)},ifLoggedIn:function(){return null!==this.loggedInUser},openEditUser:function(){this.$router.push("/register")},userEdited:function(e){this.showDialog=!1,console.log(e)}},data:function(){return{showNavigation:!1,showSidepanel:!1,showDialog:!1}},computed:{loggedAdministrator:function(){return null!==this.loggedInUser&&("ADMINISTRATOR"===this.loggedInUser.userType||"HOST"===this.loggedInUser.userType)},administrator:function(){return null!==this.loggedInUser&&"ADMINISTRATOR"===this.loggedInUser.userType},loggedHost:function(){return null!==this.loggedInUser&&"HOST"===this.loggedInUser.userType}}},Ve=He,Ge=(a("fac0"),Object(m["a"])(Ve,Me,je,!1,null,"167baa0e",null)),We=Ge.exports,Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("form",{staticClass:"md-layout md-centered",attrs:{novalidate:""}},[a("md-card",{staticClass:"md-layout-item md-size-25 md-small-size-25"},[a("md-card-content",[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",{attrs:{for:"username"}},[e._v("Username")]),a("md-input",{attrs:{name:"username",id:"username"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),e._e()],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",[a("label",{attrs:{for:"password"}},[e._v("Password")]),a("md-input",{attrs:{type:"password",name:"password",id:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e._e()],1)],1)])]),a("md-card-actions",[a("md-button",{staticClass:"md-dense md-raised md-primary",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("Login")])],1)],1)],1)])},Je=[],Ye={name:"Login",props:{},methods:{login:function(){var e=this;D.post("user/login",this.form).then((function(t){e.$emit("userLoggedIn",t.data)})).catch((function(){e.$emit("globalMessage","Invalid credentials, please try again.")}))}},data:function(){return{form:{username:null,password:null}}}},Ke=Ye,Ze=Object(m["a"])(Ke,Be,Je,!1,null,"5bac8a2a",null),Qe=Ze.exports,Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"usersTable"},[e.isAdministrator()?e._e():a("div",[a("accessDenied")],1),a("span",[e.filterActive?e._e():a("md-button",{staticClass:"md-raised md-primary",on:{click:e.activateFilter}},[e._v(" Filter ")])],1),e.filterActive?a("div",[a("filterComponent",{attrs:{activeFilters:this.activeFilters},on:{filtering:e.doFiltering}})],1):e._e(),a("div",[a("md-table",{attrs:{"md-sort":"username","md-sort-order":"asc","md-card":""},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"Username","md-sort-by":"username"}},[e._v(e._s(s.username))]),a("md-table-cell",{attrs:{"md-label":"First Name","md-sort-by":"name"}},[e._v(e._s(s.name))]),a("md-table-cell",{attrs:{"md-label":"Last Name","md-sort-by":"surname"}},[e._v(e._s(s.surname))]),a("md-table-cell",{attrs:{"md-label":"Type","md-sort-by":"userType"}},[e._v(e._s(s.userType))])],1)}}]),model:{value:e.searched,callback:function(t){e.searched=t},expression:"searched"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-start"},[a("h1",{staticClass:"md-title"},[e._v("Users")])]),a("md-field",{staticClass:"md-toolbar-section-end",attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Search..."},on:{input:e.searchOnTable},model:{value:e.searchedWord,callback:function(t){e.searchedWord=t},expression:"searchedWord"}})],1)],1)],1)],1),a("div",[a("md-button",{staticClass:"md-dense md-raised md-primary",on:{click:function(t){return e.addHost()}}},[e._v("Add host")])],1)])},et=[],tt=function(e){return e.toString().toLowerCase()},at=function(e,t){return e.reduce((function(e,a){return e.some((function(e){return t(a,e)}))||e.push(a),e}),[])},st=function(e,t){var a=[];return t&&(a=a.concat(e.filter((function(e){return e.username.includes(t)}))),a=a.concat(e.filter((function(e){return tt(e.name).includes(tt(t))}))),a=a.concat(e.filter((function(e){return tt(e.surname).includes(tt(t))}))),a=a.concat(e.filter((function(e){return tt(e.userType).includes(tt(t))}))),a=at(a,(function(e,t){return e.username==t.username}))),a},rt={name:"UsersTable",props:{loggedInUser:null},data:function(){return{searchedWord:"",searched:[],users:[],filterActive:!1,activeFilters:["userType","gender"],isAddHost:!1}},components:{accessDenied:H,filterComponent:ve},mounted:function(){var e=this;null!==this.loggedInUser&&("ADMINISTRATOR"!==this.loggedInUser.userType?"HOST"===this.loggedInUser.userType&&D.get("reservation/host/"+this.loggedInUser.username).then((function(t){t.data.forEach((function(t){D.get("user/"+t.guestUsername).then((function(t){e.users.includes(t.data)||(e.users.push(t.data),e.searched.push(t.data))}))}))})):D.get("user").then((function(t){e.users=t.data,e.searched=t.data})))},methods:{searchOnTable:function(){""==this.searchedWord?this.searched=this.users:this.searched=st(this.users,this.searchedWord)},isAdministrator:function(){return null!==this.loggedInUser&&"ADMINISTRATOR"===this.loggedInUser.userType},activateFilter:function(){this.filterActive=!0},doFiltering:function(e){var t=[];this.users.forEach((function(a){var s=!0;null!==e.user.userType&&e.user.userType!==a.userType&&(s=!1),null!==e.user.gender&&e.user.gender!==a.gender&&(s=!1),s&&t.push(a)})),this.searched=t},addHost:function(){this.isAddHost=!0,this.$emit("addingHost")}}},it=rt,nt=(a("7fee"),Object(m["a"])(it,Xe,et,!1,null,"db26c594",null)),ot=nt.exports,lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.loggedInUser?e._e():a("div",[a("access-denied")],1),a("span",[e.filterActive?e._e():a("md-button",{staticClass:"md-raised md-primary",on:{click:e.activateFilter}},[e._v(" Filter ")])],1),e.filterActive?a("div",[a("filterComponent",{attrs:{activeFilters:this.activeFilters},on:{filtering:e.doFiltering}})],1):e._e(),a("md-dialog",{attrs:{"md-active":e.comment},on:{"update:mdActive":function(t){e.comment=t},"update:md-active":function(t){e.comment=t}}},[a("ApartmentComment",{attrs:{loggedInUser:e.loggedInUser,apartmentId:this.apartmentId}})],1),e.loggedInUser?a("div",[a("md-table",{attrs:{"md-sort":"id","md-sort-order":"asc","md-card":""},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"Id","md-sort-by":"reservationId"}},[e._v(e._s(s.reservationId))]),a("md-table-cell",{attrs:{"md-label":"Apartment Id","md-sort-by":"apartmentId"}},[e._v(e._s(s.apartmentId))]),a("md-table-cell",{attrs:{"md-label":"Date","md-sort-by":"date"}},[e._v(e._s(s.date))]),a("md-table-cell",{attrs:{"md-label":"Nights","md-sort-by":"nights"}},[e._v(e._s(s.nights))]),a("md-table-cell",{attrs:{"md-label":"Price","md-sort-by":"totalPrice"}},[e._v(e._s(s.totalPrice))]),e.loggedInHost?e._e():a("md-table-cell",{attrs:{"md-label":"Host","md-sort-by":"hostUsername"}},[e._v(e._s(s.hostUsername))]),e.loggedInGuest?e._e():a("md-table-cell",{attrs:{"md-label":"Guest","md-sort-by":"guestUsername"}},[e._v(e._s(s.guestUsername))]),a("md-table-cell",{attrs:{"md-label":"Status","md-sort-by":"status"}},[e._v(e._s(s.status))]),a("md-table-cell",{attrs:{"md-label":"Actions"}},[e.loggedInGuest&&e.reservationCancelingEnabled(s)?a("md-button",{staticClass:"md-raised md-accent",on:{click:function(t){return e.cancelReservation(s)}}},[e._v("Cancel")]):e._e(),a("span",[e.loggedInHost&&e.reservationAcceptingEnabled(s)?a("md-button",{staticClass:"md-raised md-primary",on:{click:function(t){return e.acceptReservation(s)}}},[e._v("Accept")]):e._e()],1),a("span",[e.loggedInHost&&e.reservationDenieingEnabled(s)?a("md-button",{staticClass:"md-raised md-accent",on:{click:function(t){return e.denyReservation(s)}}},[e._v("Deny")]):e._e()],1)],1),e.loggedInGuest?a("md-table-cell",{attrs:{"md-label":"Comment"}},[a("md-button",{staticClass:"md-raised",on:{click:function(t){return e.openCommentDialog(s)}}},[e._v("Comment")])],1):e._e()],1)}}],null,!1,3908324952),model:{value:e.searched,callback:function(t){e.searched=t},expression:"searched"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-start"},[a("h1",{staticClass:"md-title"},[e._v("Reservations")])]),a("md-field",{staticClass:"md-toolbar-section-end",attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Search status..."},on:{input:e.searchOnTable},model:{value:e.searchedWord,callback:function(t){e.searchedWord=t},expression:"searchedWord"}})],1)],1)],1)],1):e._e()],1)},mt=[],dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"apartmentComment"},[a("div",[a("form",{staticClass:"md-layout",attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.validateComment(t)}}},[a("md-card",{staticClass:"md-layout-item md-size-50 md-small-size-100"},[a("md-card-content",[a("div",{staticClass:"md-layout-item md-small-size-100"},[a("md-field",{class:e.getValidationClass("comment")},[a("label",{attrs:{for:"comment"}},[e._v("Comment")]),a("md-input",{attrs:{name:"comment",id:"comment",autocomplete:"comment"},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}}),e.$v.form.comment.required?e._e():a("span",{staticClass:"md-error"},[e._v("You must enter a comment!")])],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100"},[a("vue-stars",{attrs:{name:"rating",max:5,readonly:!1},on:{input:function(t){return e.setRating(t)}}}),a("label",{attrs:{for:"rating"}},[e._v("Rate apartment")])],1)]),a("md-card-actions",[a("div",[a("md-button",{staticClass:"md-dense md-raised md-primary",attrs:{type:"submit"}},[e._v("Submit")])],1)])],1)],1)])])},ut=[],ct={name:"ApartmentComment",mixins:[_["validationMixin"]],props:{loggedInUser:null,apartmentId:null},data:function(){return{form:{comment:null},rating:0}},validations:{form:{comment:{required:C["required"]}}},methods:{getValidationClass:function(e){var t=this.$v.form[e];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},validateComment:function(){this.$v.$touch(),this.$v.$invalid||this.saveComment()},saveComment:function(){console.log(this.rating),D.post("apartmentComment",{username:this.loggedInUser.username,apartment:this.apartmentId,comment:this.form.comment,stars:this.rating}).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))},setRating:function(e){this.rating=e}}},pt=ct,vt=Object(m["a"])(pt,dt,ut,!1,null,"328f660c",null),ht=vt.exports,ft=function(e){return e.toString().toLowerCase()},gt=function(e,t){return e.reduce((function(e,a){return e.some((function(e){return t(a,e)}))||e.push(a),e}),[])},bt=function(e,t){var a=[];return t&&(a=a.concat(e.filter((function(e){return ft(e.status).includes(ft(t))}))),a=gt(a,(function(e,t){return e.id==t.id}))),a},yt={props:{loggedInUser:null},components:{accessDenied:H,ApartmentComment:ht,filterComponent:ve},data:function(){return{reservations:[],searched:[],searchedWord:"",comment:!1,apartmentId:Number,filterActive:!1,activeFilters:["reservationStatus"]}},mounted:function(){var e=this;null!==this.loggedInUser?"ADMINISTRATOR"!==this.loggedInUser.userType?"HOST"!==this.loggedInUser.userType?"GUEST"!==this.loggedInUser.userType||D.get("reservation/guest/"+this.loggedInUser.username).then((function(t){e.reservations=t.data,e.searched=t.data})).catch((function(){e.$emit("globalMessage","Error!")})):D.get("reservation/host/"+this.loggedInUser.username).then((function(t){e.reservations=t.data,e.searched=t.data})).catch((function(){e.$emit("globalMessage","Error!")})):D.get("reservation").then((function(t){e.reservations=t.data,e.searched=t.data})).catch((function(){e.$emit("globalMessage","Error!")})):this.$emit("globalMessage","You have to be loged in to access this page.")},methods:{reservationDenieingEnabled:function(e){return"CREATED"===e.status},reservationAcceptingEnabled:function(e){return"CREATED"===e.status},reservationCancelingEnabled:function(e){return"CREATED"===e.status||"ACCEPTED"===e.status},reservationCenceled:function(e){return"CANCELED"===e.status},searchOnTable:function(){""==this.searchedWord?this.searched=this.reservations:this.searched=bt(this.reservations,this.searchedWord)},cancelReservation:function(e){var t=this;e.status="CANCELED",D.put("reservation/status",{reservationId:e.reservationId,reservationStatus:e.status}).then((function(){t.$emit("globalMessage","Reservation canceled.")})).catch((function(){t.$emit("globalMessage","An error has occured!")}))},acceptReservation:function(e){var t=this;e.status="ACCEPTED",D.put("reservation/status",{reservationId:e.reservationId,reservationStatus:e.status}).then((function(){t.$emit("globalMessage","Reservation accepted.")})).catch((function(){t.$emit("globalMessage","An error has occured!")}))},denyReservation:function(e){var t=this;e.status="DENIED",D.put("reservation/status",{reservationId:e.reservationId,reservationStatus:e.status}).then((function(){t.$emit("globalMessage","Reservation denied.")})).catch((function(){t.$emit("globalMessage","An error has occured!")}))},openCommentDialog:function(e){this.apartmentId=e.apartmentId,this.comment=!0},activateFilter:function(){this.filterActive=!0},doFiltering:function(e){var t=[];this.reservations.forEach((function(a){var s=!0;null!==e.reservation.reservationStatus&&e.reservation.reservationStatus!==a.status&&(s=!1),s&&t.push(a)})),this.searched=t}},computed:{loggedInHost:function(){return null!==this.loggedInUser&&"HOST"===this.loggedInUser.userType},loggedInGuest:function(){return null!==this.loggedInUser&&"GUEST"===this.loggedInUser.userType}}},_t=yt,Ct=Object(m["a"])(_t,lt,mt,!1,null,null,null),At=Ct.exports,Tt=a("5887"),Dt=a.n(Tt),Et=a("0ed0"),Nt=a("00e7");s["default"].use(r["a"]),s["default"].use(Nt),s["default"].use(Dt.a),s["default"].component("vue-stars",Et["VueStars"]);var It=new r["a"]({routes:[{path:"/",component:qe,redirect:"/apartmentTable",children:[{path:"/hello",name:"Hello World",component:g},{path:"/reservationTable",name:"Reservation Table",component:At},{path:"/reservation",name:"Reservation",component:le},{path:"/home",name:"Home"},{path:"/register",name:"Register",component:k},{path:"/login",name:"Login",component:Qe},{path:"/amenity",name:"Amenity",component:x},{path:"/apartment",name:"Apartment",component:B},{path:"/apartmentTable",name:"ApartmentTable",component:Ce},{path:"/amenitiesTable",name:"AmenitiesTable",component:Fe},{path:"/usersTable",name:"UsersTable",component:ot},{path:"/apartmentComment",name:"ApartmentComment",component:ht},{path:"/filterComponent",name:"FilterComponent",component:ve}]}]});s["default"].config.productionTip=!1,s["default"].use(Pe.a),s["default"].component("side-bar",We),new s["default"]({router:It,render:function(e){return e(u)},data:{}}).$mount("#app")},"657c":function(e,t,a){},7554:function(e,t,a){},"7fee":function(e,t,a){"use strict";var s=a("e4fa"),r=a.n(s);r.a},"80d3":function(e,t,a){},"812e":function(e,t,a){"use strict";var s=a("80d3"),r=a.n(s);r.a},"83fd":function(e,t,a){},"96fe":function(e,t,a){"use strict";var s=a("7554"),r=a.n(s);r.a},a399:function(e,t,a){"use strict";var s=a("83fd"),r=a.n(s);r.a},d474:function(e,t,a){"use strict";var s=a("0c0b"),r=a.n(s);r.a},e4fa:function(e,t,a){},f655:function(e,t,a){"use strict";var s=a("4518"),r=a.n(s);r.a},fac0:function(e,t,a){"use strict";var s=a("657c"),r=a.n(s);r.a}});
//# sourceMappingURL=app.b71fafe1.js.map